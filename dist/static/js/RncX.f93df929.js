(window.webpackJsonp=window.webpackJsonp||[]).push([["RncX"],{RncX:function(t,e,i){"use strict";i.r(e);var a=i("t3Un");var l={name:"QuartzLog",data:function(){return{list:[],listLoading:!0,total:0,multipleSelection:[],listQuery:{page:1,limit:10,createTimeStart:void 0,createTimeEnd:void 0}}},created:function(){this.getList()},methods:{filterList:function(){this.listQuery.page=1,this.getList()},clearFilter:function(){this.listQuery={createTimeStart:void 0,createTimeEnd:void 0,page:1,limit:this.listQuery.limit},this.getList()},getList:function(){var t=this;if(this.listQuery.createTimeStart>this.listQuery.createTimeEnd)return this.$message.error(this.$t("error.endtime_greater_starttime")),!1;this.listLoading=!0,function(t){return Object(a.a)({url:"/0api/system/quartzLog/listPage",method:"post",data:t})}(this.listQuery).then(function(e){t.list=e.data.records,t.total=e.data.total,t.listLoading=!1})},handleSelectionChange:function(t){this.multipleSelection=t},handleDeleteAll:function(){var t=this;(function(t){return Object(a.a)({url:"/0api/system/quartzLog/deleteAllLog",method:"post",data:t})})().then(function(e){200===e.code?(t.filterList(),t.submitOk(e.message)):t.submitFail(e.message)})},handleDelete:function(t){var e=this,i=[];if("all"===t)for(var l=0;l<this.multipleSelection.length;l++){var s={id:this.multipleSelection[l].id,jobId:this.multipleSelection[l].jobId};i.push(s)}else{var n={id:t.id,jobId:t.jobId};i.push(n)}0!==i.length?function(t){return Object(a.a)({url:"/0api/system/quartzLog/deleteQuartzLog",method:"post",data:t})}(i).then(function(t){200==t.code?(e.filterList(),e.submitOk(t.message)):e.submitFail(t.message)}):this.$message.error(this.$t("table.delete_message"))}}},s=i("KHd+"),n=Object(s.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("cus-wraper",[i("cus-filter-wraper",[i("label",{staticStyle:{"font-weight":"normal"}},[t._v(t._s(t.$t("table.date")))]),t._v(" "),i("el-date-picker",{staticStyle:{"line-height":"50px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:t.filterList},model:{value:t.listQuery.createTimeStart,callback:function(e){t.$set(t.listQuery,"createTimeStart",e)},expression:"listQuery.createTimeStart"}}),t._v("\n        -\n        "),i("el-date-picker",{staticStyle:{"line-height":"50px"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:t.filterList},model:{value:t.listQuery.createTimeEnd,callback:function(e){t.$set(t.listQuery,"createTimeEnd",e)},expression:"listQuery.createTimeEnd"}}),t._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.filterList}},[t._v(t._s(t.$t("table.query")))]),t._v(" "),i("el-button",{attrs:{type:"danger"},on:{click:t.clearFilter}},[t._v(t._s(t.$t("table.empty_condition")))])],1),t._v(" "),i("div",{staticClass:"table-container"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,size:"mini","element-loading-text":"Loading",fit:"",border:"","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("label.id"),prop:"id",align:"center",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{label:"任务ID",prop:"jobId",align:"center",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{label:"任务名称",prop:"jobName",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("table.status"),prop:"isSuccess",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(1===e.row.isSuccess?t.$t("label.success"):t.$t("label.fail"))+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"异常详细信息",prop:"exceptionDetail",align:"center",width:"180"}}),t._v(" "),i("el-table-column",{attrs:{label:"耗时(毫秒)",prop:"time",align:"center",width:"100"}}),t._v(" "),i("el-table-column",{attrs:{label:t.$t("label.endtime"),prop:"createTime",align:"center",width:"180"}}),t._v(" "),this.global_checkBtnPermission(["sys:quartzLog:del"])?i("el-table-column",{attrs:{align:"center",label:t.$t("table.actions"),width:"120",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("cus-del-btn",{directives:[{name:"has",rawName:"v-has",value:"sys:quartzLog:del",expression:"'sys:quartzLog:del'"}],on:{ok:function(i){t.handleDelete(e.row)}}})]}}])}):t._e()],1),t._v(" "),i("div",{staticStyle:{padding:"10px 0",border:"1px solid #EBEEF5"}},[i("cus-del-select",{directives:[{name:"has",rawName:"v-has",value:"sys:quartzLog:del",expression:"'sys:quartzLog:del'"}],on:{ok:function(e){t.handleDelete("all")}}}),t._v(" "),i("cus-del-all",{directives:[{name:"has",rawName:"v-has",value:"sys:quartzLog:delAll",expression:"'sys:quartzLog:delAll'"}],on:{ok:t.handleDeleteAll}})],1),t._v(" "),i("cus-pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){t.$set(t.listQuery,"page",e)},"update:limit":function(e){t.$set(t.listQuery,"limit",e)},pagination:t.getList}})],1)],1)],1)},[],!1,null,null,null);n.options.__file="quartzLog.vue";e.default=n.exports}}]);