(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0644"],{28:function(t,e){},29:function(t,e){},30:function(t,e){},"7BYH":function(t,e,a){"use strict";a.r(e);var l=a("wrcX"),o=a("Kw5r"),i=a("EUZL"),n=a.n(i),s=(a("XJYT"),{name:"LangParameter",data:function(){return{dialogVisible:!1,list:[],form:{code:"",val:"",desc:""},name:"",downloadLoading:!1,filename:"翻译文件",autoWidth:!0,bookType:"xlsx",fileList:[],headers:[{label:"ID",prop:"id"},{label:"code",prop:"code"},{label:"translate",prop:"val"}]}},created:function(){this.name=this.$route.params.value,this.LangParameter(),o.default.prototype.$importExcel=function(t,e){var a=this;return new Promise(function(l,o){var i=t.name.split(".")[1];["xlsx","xlc","xlm","xls","xlt","xlw","csv"].some(function(t){return t===i})||(a.$message({type:"warning",message:a.$t("file_format_is_incorrect")}),o());var s=new FileReader;s.onload=function(t){var a=t.target.result;console.log(t.target),console.log(a),this.wb=n.a.read(a,{type:"binary"});var o=this.wb.SheetNames[0],i=this.wb.Sheets[o],s=n.a.utils.sheet_to_json(i),r=[],c=!0,d=!1,u=void 0;try{for(var m,f=s[Symbol.iterator]();!(c=(m=f.next()).done);c=!0){var h=m.value,p={};for(var v in h){var b=!0,g=!1,w=void 0;try{for(var _,y=e[Symbol.iterator]();!(b=(_=y.next()).done);b=!0){var x=_.value;if(v===x.label){p[x.prop]=h[v];break}}}catch(t){g=!0,w=t}finally{try{!b&&y.return&&y.return()}finally{if(g)throw w}}}r.push(p)}}catch(t){d=!0,u=t}finally{try{!c&&f.return&&f.return()}finally{if(d)throw u}}l(r)},s.readAsBinaryString(t.raw)})}},methods:{change:function(t){var e=this;this.$importExcel(t,this.headers).then(function(t){console.log("导入==="),console.log(t),t.forEach(function(t){e.list.forEach(function(e){t.id==e.id&&(e.val=t.val)})}),console.log("导入===完成"),console.log(e.list),e.submitOk("OK"),console.log(t)})},handleDownload:function(){var t=this;this.$confirm(this.$t("label.determine_whether_operate"),this.$t("confirm.tips"),{confirmButtonText:this.$t("table.confirm"),cancelButtonText:this.$t("table.cancel"),type:"warning"}).then(function(){t.downloadLoading=!0,a.e("chunk-8725").then(a.bind(null,"S/jZ")).then(function(e){var a=t.list,l=t.formatJson(["id","code","val"],a);e.export_json_to_excel({header:["ID","code","translate"],data:l,filename:t.filename,autoWidth:t.autoWidth,bookType:t.bookType}),t.downloadLoading=!1})})},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return"timestamp"===t?parseTime(e[t]):e[t]})})},addCreate:function(){this.dialogStatus="create",this.dialogVisible=!0},LangParameter:function(){var t=this;Object(l.g)({lang:this.name}).then(function(e){200===e.code&&(t.list=e.data)})},reset:function(){this.LangParameter()},submit:function(){for(var t=this,e=[],a=0;a<this.list.length;a++)this.list[a].old_val!==this.list[a].val&&e.push({id:this.list[a].id,val:void 0==this.list[a].val?"":this.list[a].val});var o=JSON.stringify(e);Object(l.c)({lang:this.name,list:o}).then(function(e){200===e.code&&(t.submitOk(e.message),t.LangParameter())})},handleDialogClose:function(){this.$refs.form&&this.$refs.form.clearValidate()},submitForm:function(){var t=this;this.form.lang=this.name,Object(l.a)(this.form).then(function(e){200===e.code&&(t.submitOk(e.message),t.dialogVisible=!1,t.handleDialogClose(),t.LangParameter())})}}}),r=a("KHd+"),c=Object(r.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"dataForm",staticClass:"demo-ruleForm",staticStyle:{width:"100%","margin-top":"30px"},attrs:{"label-width":"150px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list}},[a("el-table-column",{attrs:{prop:"code",label:"code"}}),t._v(" "),a("el-table-column",{attrs:{prop:"val",label:t.$t("translation")},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{width:"90%"},model:{value:e.row.val,callback:function(a){t.$set(e.row,"val",a)},expression:"scope.row.val"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"desc",label:t.$t("comment")}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center","margin-top":"50px",width:"100%",float:"left"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"has",rawName:"v-has",value:"langSetUp",expression:"'langSetUp'"}],attrs:{type:"warning"},on:{click:t.reset}},[t._v(" "+t._s(t.$t("table.reset"))+" ")]),t._v(" "),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"langSetUp",expression:"'langSetUp'"}],attrs:{type:"primary"},on:{click:t.submit}},[t._v(" "+t._s(t.$t("table.confirm"))+" ")]),t._v(" "),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"langSetUp",expression:"'langSetUp'"}],attrs:{type:"danger"},on:{click:t.addCreate}},[t._v(" "+t._s(t.$t("table.add"))+" ")]),t._v(" "),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"langSetUp",expression:"'langSetUp'"}],attrs:{type:"info"},on:{click:t.handleDownload}},[t._v(" "+t._s(t.$t("export"))+" ")]),t._v(" "),a("span",[a("el-upload",{ref:"upload",staticClass:"importExcel upload-demo",staticStyle:{display:"inline-block"},attrs:{action:"","auto-upload":!1,"file-list":t.fileList,"show-file-list":!1,"on-change":t.change}},[a("el-button",{attrs:{type:"success"}},[t._v(t._s(t.$t("import")))])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.handleDialogClose}},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",staticStyle:{width:"100%","max-width":"700px"},attrs:{model:t.form,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"code:"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入code"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}}),t._v(" "),a("span",{staticStyle:{color:"#E6A23C"}},[t._v("(英文：直接用 '_' 链接) ")])],1),t._v(" "),a("el-form-item",{attrs:{label:"值:"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入展示的值"},model:{value:t.form.val,callback:function(e){t.$set(t.form,"val",e)},expression:"form.val"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"说明:"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入说明信息"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(" "+t._s(t.$t("table.cancel"))+" ")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("\n\t\t\t\t\t"+t._s(t.$t("table.confirm"))+"\n\t\t\t\t")])],1)],1)],1)},[],!1,null,null,null);c.options.__file="LangSetUp.vue";e.default=c.exports}}]);