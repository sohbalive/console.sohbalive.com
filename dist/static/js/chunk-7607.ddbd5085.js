(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7607"],{JBZS:function(e,t,n){"use strict";n.r(t);var a=n("hKRS"),r=n("xk1r"),s={name:"roleSetting",data:function(){return{listLoading:!0,roleId:void 0,roleData:{id:void 0,code:void 0,name:void 0,remarks:void 0},activeName:"allotUser",defaultPropsUser:{children:"children",label:"username"},defaultCheckedKeysUser:[],userList:[],userTree:[],defaultPropsMenu:{children:"children",label:"title"},defaultCheckedKeysMenu:[],menuList:[],menuTree:[],defaultPropsWxAccount:{children:"children",label:"name"}}},created:function(){this.listLoading=!0,this.roleId=this.$route.params.id,this.getRoleData(),this.getUserTabData(),this.getMenuTabData(),this.listLoading=!1},methods:{getRoleData:function(){var e=this;Object(a.b)(this.roleId).then(function(t){e.roleData=t.data})},getUserTabData:function(){var e=this;Object(a.i)().then(function(t){e.userList=t.data.userList,e.userTree=t.data.userTree}),Object(a.e)({roleId:this.roleId}).then(function(t){t.data&&t.data.length>0&&(e.defaultCheckedKeysUser=e._.map(t.data,"userId"))})},getMenuTabData:function(){var e=this;Object(r.c)().then(function(t){e.menuList=t.data.menuList,e.menuTree=t.data.menuTree}),Object(a.c)({roleId:this.roleId}).then(function(t){t.data&&t.data.length>0&&(e.defaultCheckedKeysMenu=e._.map(t.data,"menuId"),e.$refs.menuTree.setCheckedKeys(e._.map(t.data,"menuId")))})},handleTabClick:function(e,t){},saveSysUserRole:function(){var e=this,t=this.$refs.userTree.getCheckedKeys();this.roleId=parseInt(this.roleId),Object(a.h)({roleId:this.roleId,userIds:t.join(",")}).then(function(t){200==t.code?e.submitOk(t.message):e.submitFail(t.message)})},saveRoleMenu:function(){var e=this;this.listLoading=!0;var t=this.$refs.menuTree.getCheckedKeys();if(void 0==t)t=this.$refs.menuTree.getCheckedKeys();else for(var n=this.$refs.menuTree.getHalfCheckedKeys(),r=n.length,s=0;s<r;s++)t.push(n[s]);this.roleId=parseInt(this.roleId),Object(a.g)({roleId:this.roleId,menuIds:t.join(",")}).then(function(t){200===t.code?e.submitOk(t.message):e.submitFail(t.message),e.listLoading=!1})}}},i=n("KHd+"),o=Object(i.a)(s,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"app-container"},[n("div",{staticStyle:{display:"block",height:"10px"}}),e._v(" "),n("span",{staticStyle:{"font-size":"25px","font-weight":"bold"}},[e._v("角色 ： "+e._s(e.roleData.name))]),e._v(" "),n("div",{staticStyle:{display:"block",height:"20px"}}),e._v(" "),n("el-tabs",{on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"分配用户",name:"allotUser"}},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.userList.length>0,expression:"userList.length > 0"}],staticStyle:{"margin-bottom":"20px","margin-left":"20px"},attrs:{type:"primary"},on:{click:e.saveSysUserRole}},[e._v("保存")]),e._v(" "),n("el-tree",{ref:"userTree",attrs:{data:e.userTree,"show-checkbox":"",props:e.defaultPropsUser,"default-checked-keys":e.defaultCheckedKeysUser,"node-key":"id"}})],1),e._v(" "),n("el-tab-pane",{attrs:{label:"分配菜单",name:"allotMenu"}},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.menuTree.length>0,expression:"menuTree.length > 0"}],staticStyle:{"margin-bottom":"20px","margin-left":"20px"},attrs:{type:"primary"},on:{click:e.saveRoleMenu}},[e._v("保存")]),e._v(" "),n("el-tree",{ref:"menuTree",attrs:{"check-strictly":!1,data:e.menuTree,"show-checkbox":"","node-key":"id","highlight-current":"","default-checked-keys":e.defaultCheckedKeysMenu,props:e.defaultPropsMenu}})],1)],1)],1)},[],!1,null,null,null);o.options.__file="roleSetting.vue";t.default=o.exports},hKRS:function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"f",function(){return s}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"i",function(){return u}),n.d(t,"e",function(){return d}),n.d(t,"c",function(){return l}),n.d(t,"h",function(){return c}),n.d(t,"g",function(){return h});var a=n("t3Un");function r(e){return Object(a.a)({url:"/admin/role/listPage",method:"post",data:e})}function s(e){return Object(a.a)({url:"/admin/role/saveOrUpdate",method:"post",data:e})}function i(e){return Object(a.a)({url:"/admin/role/delete",method:"post",data:{id:e}})}function o(e){return Object(a.a)({url:"/admin/role/detail",method:"post",data:{id:e}})}function u(){return Object(a.a)({url:"/admin/sysUser/treeUser",method:"post"})}function d(e){return Object(a.a)({url:"/admin/sysUserRole/list",method:"post",data:e})}function l(e){return Object(a.a)({url:"/admin/roleMenu/list",method:"post",data:e})}function c(e){return Object(a.a)({url:"/admin/sysUserRole/saveUserRole",method:"post",data:e})}function h(e){return Object(a.a)({url:"/admin/roleMenu/saveRoleMenu",method:"post",data:e})}},xk1r:function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return i});var a=n("t3Un");function r(){return Object(a.a)({url:"/admin/menu/treeMenu",method:"post"})}function s(e){return Object(a.a)({url:"/admin/menu/save",method:"post",data:e})}function i(e){return Object(a.a)({url:"/admin/menu/delete",method:"post",data:{id:e}})}}}]);